{"version":3,"sources":["auth-provider.ts","utils/http.ts","utils/index.ts","use-async.ts","components/lib.tsx","context/auth-context.tsx","components/pin.tsx","utils/project.ts","utils/url.ts","screens/project-list/util.ts","screens/project-list/list.tsx","screens/project-list/search-panel.tsx","screens/project-list/index.tsx","utils/users.ts","screens/epic/index.tsx","screens/kanban/index.tsx","screens/project/index.tsx","screens/project-list/project-modal.tsx","components/project-popover.tsx","authenticated-app.tsx","components/error-boundary.tsx","unauthenticated-app/login.tsx","unauthenticated-app/register.tsx","unauthenticated-app/index.tsx","App.tsx","reportWebVitals.ts","context/index.tsx","index.tsx"],"names":["apiUrl","process","localStorageKey","handleUserResponse","user","window","localStorage","setItem","token","logout","a","removeItem","http","endpoint","data","headers","customConfig","config","method","Authorization","toUpperCase","qs","stringify","body","JSON","fetch","then","response","status","auth","location","reload","Promise","reject","message","json","ok","useHttp","useAuth","useCallback","clearObject","object","result","Object","keys","forEach","key","value","isVoid","resetRoute","href","origin","defaultInitalState","stat","error","defaultConfig","throwOnError","useAsync","initialState","initialConfig","useState","state","setState","mountedRef","useRef","useEffect","current","useMountedRef","retry","setRetry","setData","setError","run","promise","runConfig","Error","prevState","catch","console","log","isIdle","isLoading","isError","isSuccess","FullPageLoading","style","height","display","justifyContent","alignItems","size","FullPageErrorFallback","ErrorBox","Text","type","bootstrapUser","getItem","AuthContext","React","createContext","undefined","displayName","AuthProvider","callback","children","setUser","Provider","login","form","res","register","context","useContext","Pin","checked","onCheckedChange","count","onChange","num","useProjects","params","client","useQuery","useUrlQueryParam","useSearchParams","searchParams","setSearchParam","useMemo","reduce","prev","get","o","fromEntries","useProjectModal","projectCreate","setProjectCreate","projectModalOpen","open","close","List","users","rest","mutate","id","useEditProject","pagination","rowKey","columns","title","disabled","render","record","pin","dataIndex","sorter","b","name","localeCompare","to","String","find","item","personId","moment","format","overlay","Item","padding","onClick","SearchPanel","param","setParam","event","target","Option","map","ProjectListScreen","debouncedParam","delay","debounceValue","setDebounceValue","timeout","setTimeout","clearTimeout","useDebounce","list","useUsers","keepOnUnmount","oldTitle","document","useDocumentTitle","loading","dataSource","EpicScreen","KanbanScreen","ProjectScreen","path","element","index","ProjectModal","visible","onClose","width","ProjectPopover","projects","pinnedProjects","filter","content","Meta","placement","AuthenticatadApp","ErrorBoundary","this","props","fallbackRender","Component","LoginScreen","onError","handleSubmit","values","onFinish","rules","required","placeholder","htmlType","RegisterScreen","cpassword","password","UnauthenticateApp","isRegister","setIsRegister","Container","ShadowCard","styled","Card","div","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AppProviders","QueryClient","loadServer","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1db0b95b.chunk.js","sourcesContent":["import { IUser } from \"./screens/project-list/search-panel\";\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nconst localStorageKey = \"__auth_provider_token__\";\r\n\r\nexport const getToken = () => window.localStorage.getItem(localStorageKey);\r\n\r\nexport const handleUserResponse = ({ user }: { user: IUser }) => {\r\n  window.localStorage.setItem(localStorageKey, user.token || \"\");\r\n  return user;\r\n};\r\n\r\nexport const login = (data: { username: string; password: string }) => {\r\n  return fetch(`${apiUrl}/login`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  }).then(async (res) => {\r\n    if (res.ok) {\r\n      return handleUserResponse(await res.json());\r\n    } else {\r\n      return Promise.reject(await res.json());\r\n    }\r\n  });\r\n};\r\n\r\nexport const register = (data: { username: string; password: string }) => {\r\n  return fetch(`${apiUrl}/register`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  }).then(async (res) => {\r\n    if (res.ok) {\r\n      return handleUserResponse(await res.json());\r\n    } else {\r\n      return Promise.reject(await res.json());\r\n    }\r\n  });\r\n};\r\n\r\nexport const logout = async () =>\r\n  window.localStorage.removeItem(localStorageKey);\r\n","import qs from \"qs\";\r\nimport { useCallback } from \"react\";\r\nimport * as auth from \"../auth-provider\";\r\nimport { useAuth } from \"../context/auth-context\";\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\ninterface Config extends RequestInit {\r\n  token?: string;\r\n  data?: object;\r\n}\r\n\r\nexport const http = async (\r\n  endpoint: string,\r\n  { data, token, headers, ...customConfig }: Config = {}\r\n) => {\r\n  const config = {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : \"\",\r\n      \"Content-Type\": data ? \"application/json\" : \"\",\r\n    },\r\n    ...customConfig,\r\n  };\r\n\r\n  if (config.method.toUpperCase() === \"GET\") {\r\n    endpoint += `?${qs.stringify(data)}`;\r\n  } else {\r\n    config.body = JSON.stringify(data || {});\r\n  }\r\n\r\n  return window\r\n    .fetch(`${apiUrl}/${endpoint}`, config)\r\n    .then(async (response) => {\r\n      if (response.status === 401) {\r\n        await auth.logout();\r\n        window.location.reload();\r\n        return Promise.reject({ message: \"请重新登录\" });\r\n      }\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        return data;\r\n      } else {\r\n        return Promise.reject(data);\r\n      }\r\n    });\r\n};\r\n\r\nexport const useHttp = () => {\r\n  const { user } = useAuth();\r\n  return useCallback(\r\n    (...[endpoint, config]: Parameters<typeof http>) =>\r\n      http(endpoint, { ...config, token: user?.token }),\r\n    [user?.token]\r\n  );\r\n};\r\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport const isFalsy = (value: unknown) => (value === 0 ? false : !value);\r\nexport const isVoid = (value: unknown) => (value ?? \"\") !== \"\";\r\n\r\nexport const clearObject = (object: { [key: string]: unknown }) => {\r\n  const result = { ...object };\r\n  Object.keys(result).forEach((key) => {\r\n    const value = result[key];\r\n    if (!isVoid(value)) {\r\n      delete result[key];\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const useMount = (callback: () => void) => {\r\n  //TODO\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => callback(), []);\r\n};\r\n\r\nexport const useDebounce = <T>(value: T, delay?: number) => {\r\n  const [debounceValue, setDebounceValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => setDebounceValue(value), delay);\r\n    return () => clearTimeout(timeout);\r\n  }, [value, delay]);\r\n\r\n  return debounceValue;\r\n};\r\n\r\nexport const useArray = <T>(initialArray: Array<T>) => {\r\n  const [value, setValue] = useState(initialArray);\r\n\r\n  return {\r\n    value,\r\n    setValue,\r\n    add: (item: T) => setValue([...value, item]),\r\n    clear: () => setValue([]),\r\n    removeIndex: (index: number) => {\r\n      const copy = [...value];\r\n      copy.splice(index, 1);\r\n      setValue(copy);\r\n    },\r\n  };\r\n};\r\n\r\nexport const useDocumentTitle = (\r\n  title: string,\r\n  keepOnUnmount: boolean = true\r\n) => {\r\n  const oldTitle = useRef(document.title).current;\r\n  useEffect(() => {\r\n    document.title = title;\r\n  }, [title]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (!keepOnUnmount) {\r\n        document.title = oldTitle;\r\n      }\r\n    };\r\n  }, [keepOnUnmount, oldTitle]);\r\n};\r\n\r\nexport const resetRoute = () => (window.location.href = window.location.origin);\r\n\r\n/**\r\n * 返回组件的挂载状态,如果还没挂载或者已经卸载,返回false,反之返回true\r\n */\r\nexport const useMountedRef = () => {\r\n  const mountedRef = useRef(false);\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  });\r\n  return mountedRef;\r\n};\r\n","import { useCallback, useState } from \"react\";\r\nimport { useMountedRef } from \"./utils\";\r\n\r\ninterface State<D> {\r\n  data: D | null;\r\n  error: Error | null;\r\n  stat: \"idle\" | \"loading\" | \"error\" | \"success\";\r\n}\r\n\r\nconst defaultInitalState: State<null> = {\r\n  stat: \"idle\",\r\n  data: null,\r\n  error: null,\r\n};\r\n\r\nconst defaultConfig = {\r\n  throwOnError: false,\r\n};\r\n\r\nexport const useAsync = <D>(\r\n  initialState?: State<D>,\r\n  initialConfig?: typeof defaultConfig\r\n) => {\r\n  const config = { ...defaultConfig, ...initialConfig };\r\n  const [state, setState] = useState<State<D>>({\r\n    ...defaultInitalState,\r\n    ...initialState,\r\n  });\r\n  const mountedRef = useMountedRef();\r\n  const [retry, setRetry] = useState(() => () => {});\r\n\r\n  const setData = useCallback(\r\n    (data: D) =>\r\n      setState({\r\n        data,\r\n        stat: \"success\",\r\n        error: null,\r\n      }),\r\n    []\r\n  );\r\n\r\n  const setError = useCallback(\r\n    (error: Error) =>\r\n      setState({\r\n        error,\r\n        stat: \"error\",\r\n        data: null,\r\n      }),\r\n    []\r\n  );\r\n\r\n  const run = useCallback(\r\n    (promise: Promise<D>, runConfig?: { retry: () => Promise<D> }) => {\r\n      if (!promise || !promise.then) {\r\n        throw new Error(\"请传入 Promise 类型数据\");\r\n      }\r\n      setRetry(\r\n        () => () => runConfig?.retry && run(runConfig?.retry(), runConfig)\r\n      );\r\n      setState((prevState) => ({ ...prevState, stat: \"loading\" }));\r\n      return promise\r\n        .then((data) => {\r\n          if (mountedRef.current) setData(data);\r\n          return data;\r\n        })\r\n        .catch((error) => {\r\n          setError(error);\r\n          console.log(config.throwOnError, \"config.throwOnError\");\r\n          if (config.throwOnError) return Promise.reject(error);\r\n          return error;\r\n        });\r\n    },\r\n    [config.throwOnError, mountedRef, setData, setError]\r\n  );\r\n\r\n  return {\r\n    isIdle: state.stat === \"idle\",\r\n    isLoading: state.stat === \"loading\",\r\n    isError: state.stat === \"error\",\r\n    isSuccess: state.stat === \"success\",\r\n    run,\r\n    setData,\r\n    setError,\r\n    retry,\r\n    ...state,\r\n  };\r\n};\r\n","import { Spin, Typography } from \"antd\";\nimport { DevTools } from \"jira-dev-tool\";\n\nexport const FullPageLoading = () => {\n  return (\n    <div\n      style={{\n        height: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Spin size=\"large\" />\n    </div>\n  );\n};\n\nexport const FullPageErrorFallback = ({ error }: { error: Error | null }) => {\n  return (\n    <div\n      style={{\n        height: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <DevTools />\n      <ErrorBox error={error} />\n    </div>\n  );\n};\n\n// 类型守卫\nconst isError = (value: any): value is Error => value?.message;\nexport const ErrorBox = ({ error }: { error: unknown }) => {\n  if (isError(error)) {\n    return <Typography.Text type=\"danger\">{error.message}</Typography.Text>;\n  }\n  return null;\n};\n","import React, { ReactNode } from \"react\";\nimport * as auth from \"./../auth-provider\";\nimport { IUser } from \"../screens/project-list/search-panel\";\nimport { http } from \"../utils/http\";\nimport { useMount } from \"../utils\";\nimport { useAsync } from \"../use-async\";\nimport { FullPageErrorFallback, FullPageLoading } from \"../components/lib\";\n\ninterface IAuthForm {\n  username: string;\n  password: string;\n}\n\nconst bootstrapUser = async () => {\n  let user = null;\n  const token = auth.getToken();\n  if (token) {\n    const data = await http(\"me\", { token });\n    user = data.user;\n  }\n  return user;\n};\n\nconst AuthContext = React.createContext<\n  | {\n      user: IUser | null;\n      register: (form: IAuthForm) => Promise<void>;\n      login: (form: IAuthForm) => Promise<void>;\n      logout: () => Promise<void>;\n    }\n  | undefined\n>(undefined);\nAuthContext.displayName = \"AuthContext\";\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const {\n    data: user,\n    error,\n    isLoading,\n    isIdle,\n    isError,\n    run,\n    setData: setUser,\n  } = useAsync<IUser | null>();\n\n  const login = (form: IAuthForm) => {\n    return auth.login(form).then(setUser);\n  };\n\n  const register = (form: IAuthForm) => auth.register(form).then(setUser);\n\n  const logout = () => {\n    return auth.logout().then(() => setUser(null));\n  };\n\n  useMount(() => {\n    run(bootstrapUser());\n  });\n\n  if (isIdle || isLoading) {\n    return <FullPageLoading />;\n  }\n\n  if (isError) {\n    return <FullPageErrorFallback error={error} />;\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{ user, login, register, logout }}\n      children={children}\n    />\n  );\n};\n\nexport const useAuth = () => {\n  const context = React.useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth必须在AuthProvider中使用\");\n  }\n  return context;\n};\n","import React from \"react\";\nimport { Rate } from \"antd\";\n\ninterface PinProps extends React.ComponentProps<typeof Rate> {\n  checked: boolean;\n  onCheckedChange?: (checked: boolean) => void;\n}\n\nexport const Pin = ({ checked, onCheckedChange, ...rest }: PinProps) => {\n  return (\n    <Rate\n      count={1}\n      value={checked ? 1 : 0}\n      onChange={(num) => onCheckedChange?.(!!num)}\n    />\n  );\n};\n","import { useQuery } from \"react-query\";\r\nimport { IProject } from \"../screens/project-list/list\";\r\nimport { useAsync } from \"../use-async\";\r\nimport { useHttp } from \"./http\";\r\n\r\nexport const useProjects = (params?: Partial<IProject>) => {\r\n  const client = useHttp();\r\n\r\n  return useQuery<Array<IProject>>([\"projects\", params], () =>\r\n    client(\"projects\", { data: params })\r\n  );\r\n};\r\n\r\nexport const useEditProject = () => {\r\n  const { run, ...rest } = useAsync();\r\n  const client = useHttp();\r\n  const mutate = (params: Partial<IProject>) =>\r\n    run(client(`projects/${params.id}`, { data: params, method: \"PATCH\" }));\r\n  return {\r\n    mutate,\r\n    ...rest,\r\n  };\r\n};\r\n\r\nexport const useAddProject = () => {\r\n  const { run, ...rest } = useAsync();\r\n  const client = useHttp();\r\n  const mutate = (params: Partial<IProject>) =>\r\n    run(client(`projects/${params.id}`, { data: params, method: \"POST\" }));\r\n  return {\r\n    mutate,\r\n    ...rest,\r\n  };\r\n};\r\n","import { useMemo } from \"react\";\r\nimport { URLSearchParamsInit, useSearchParams } from \"react-router-dom\";\r\nimport { clearObject } from \".\";\r\n\r\nexport const useUrlQueryParam = <K extends string>(keys: K[]) => {\r\n  const [searchParams, setSearchParam] = useSearchParams();\r\n  return [\r\n    useMemo(\r\n      () =>\r\n        keys.reduce((prev, key) => {\r\n          return { ...prev, [key]: searchParams.get(key) || \"\" };\r\n        }, {} as { [key in K]: string }),\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      [searchParams]\r\n    ),\r\n    (params: Partial<{ [key in K]: unknown }>) => {\r\n      const o = clearObject({\r\n        ...Object.fromEntries(searchParams),\r\n        ...params,\r\n      }) as URLSearchParamsInit;\r\n      return setSearchParam(o);\r\n    },\r\n  ] as const;\r\n};\r\n","import { useUrlQueryParam } from \"../../utils/url\";\r\n\r\nexport const useProjectModal = () => {\r\n  const [{ projectCreate }, setProjectCreate] = useUrlQueryParam([\r\n    \"projectCreate\",\r\n  ]);\r\n\r\n  const open = () => setProjectCreate({ projectCreate: true });\r\n  const close = () => setProjectCreate({ projectCreate: undefined });\r\n\r\n  return {\r\n    projectModalOpen: projectCreate === \"true\",\r\n    open,\r\n    close,\r\n  };\r\n};\r\n","import React from \"react\";\nimport { Button, Dropdown, Menu, Table, TableProps } from \"antd\";\nimport { IUser } from \"./search-panel\";\nimport { Link } from \"react-router-dom\";\nimport { Pin } from \"../../components/pin\";\nimport { useEditProject } from \"../../utils/project\";\nimport moment from \"moment\";\nimport { useProjectModal } from \"./util\";\n\nexport interface IProject {\n  id: string;\n  name: string;\n  personId: string;\n  pin: boolean;\n  organization: string;\n}\n\ninterface IList extends TableProps<IProject> {\n  users: Array<IUser>;\n}\n\nexport const List = ({ users, ...rest }: IList) => {\n  const { open } = useProjectModal();\n  const { mutate } = useEditProject();\n  return (\n    <Table\n      pagination={false}\n      rowKey=\"id\"\n      columns={[\n        {\n          title: <Pin checked={true} disabled={true} />,\n          render(value, record) {\n            return (\n              <Pin\n                checked={record.pin}\n                onCheckedChange={(pin) => mutate({ id: record.id, pin })}\n              />\n            );\n          },\n        },\n        {\n          title: \"名称\",\n          dataIndex: \"name\",\n          sorter: (a, b) => a.name.localeCompare(b.name),\n          render: (value, record) => {\n            return <Link to={`projects/${String(record.id)}`}>{value}</Link>;\n          },\n        },\n        {\n          title: \"负责人\",\n          render: (value, record) => {\n            return (\n              users.find((item) => item.id === record.personId)?.name || \"未知\"\n            );\n          },\n        },\n        {\n          title: \"创建时间\",\n          dataIndex: \"created\",\n          render: (value) =>\n            value ? moment(value).format(\"YYYY-MM-DD HH:mm:ss\") : \"-\",\n        },\n        {\n          render: (value, record) => {\n            return (\n              <Dropdown\n                overlay={\n                  <Menu>\n                    <Menu.Item key=\"edit\">\n                      <Button style={{ padding: 0 }} type=\"link\" onClick={open}>\n                        编辑项目\n                      </Button>\n                    </Menu.Item>\n                  </Menu>\n                }\n              >\n                <Button type=\"link\">...</Button>\n              </Dropdown>\n            );\n          },\n        },\n      ]}\n      {...rest}\n    />\n  );\n};\n","import { Input, Select } from \"antd\";\nimport React from \"react\";\n\nexport interface IUser {\n  id: string;\n  name: string;\n  email: string;\n  title: string;\n  organization: string;\n  token: string;\n}\n\ninterface ISearchPanel {\n  users: Array<IUser>;\n  param: {\n    name: string;\n    personId: string;\n  };\n  setParam: (param: ISearchPanel[\"param\"]) => void;\n}\n\nexport const SearchPanel = ({ param, setParam, users }: ISearchPanel) => {\n  return (\n    <>\n      <Input\n        type=\"text\"\n        value={param.name}\n        onChange={(event) => setParam({ ...param, name: event.target.value })}\n      />\n      <Select\n        value={param.personId}\n        onChange={(value) => setParam({ ...param, personId: value })}\n      >\n        <Select.Option value=\"\">负责人</Select.Option>\n        {users.map((user) => (\n          <Select.Option key={user.id} value={String(user.id)}>\n            {user.name}\n          </Select.Option>\n        ))}\n      </Select>\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport { List } from \"./list\";\nimport { SearchPanel } from \"./search-panel\";\nimport { useDebounce, useDocumentTitle } from \"../../utils\";\nimport { useProjects } from \"../../utils/project\";\nimport { useUsers } from \"../../utils/users\";\nimport { Button } from \"antd\";\nimport { useUrlQueryParam } from \"../../utils/url\";\nimport { useProjectModal } from \"./util\";\nimport { ErrorBox } from \"../../components/lib\";\n\nexport const ProjectListScreen = () => {\n  const [keys] = useState<Array<\"name\" | \"personId\">>([\"name\", \"personId\"]);\n  const [param, setParam] = useUrlQueryParam(keys);\n  const debouncedParam = useDebounce(param, 1000);\n  const { isLoading, error, data: list } = useProjects(debouncedParam);\n  const { data: users } = useUsers();\n  const { open } = useProjectModal();\n  useDocumentTitle(\"项目列表\", false);\n\n  return (\n    <>\n      <SearchPanel users={users || []} param={param} setParam={setParam} />\n      <ErrorBox error={error} />\n      <Button style={{ padding: 0 }} type=\"link\" onClick={open}>\n        创建项目\n      </Button>\n      <List loading={isLoading} users={users || []} dataSource={list || []} />\n    </>\n  );\n};\n","import { useEffect } from \"react\";\r\nimport { clearObject } from \".\";\r\nimport { IUser } from \"../screens/project-list/search-panel\";\r\nimport { useAsync } from \"../use-async\";\r\nimport { useHttp } from \"./http\";\r\n\r\nexport const useUsers = (params?: Partial<IUser>) => {\r\n  const { run, ...rest } = useAsync<Array<IUser>>();\r\n  const client = useHttp();\r\n\r\n  useEffect(() => {\r\n    run(client(\"users\", { data: clearObject(params || {}) }));\r\n    //TODO\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [params]);\r\n\r\n  return rest;\r\n};\r\n","export const EpicScreen = () => {\n  return <>EpicScreen</>;\n};\n","export const KanbanScreen = () => {\n  return <>KanbanScreen</>;\n};\n","import { Button } from \"antd\";\nimport React from \"react\";\nimport { Route, Routes } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { EpicScreen } from \"../epic\";\nimport { KanbanScreen } from \"../kanban\";\n\nexport const ProjectScreen = () => {\n  return (\n    <>\n      <header>\n        <h1>ProjectScreen</h1>\n        <Button>\n          <Link to={\"kanban\"}>看板</Link>\n        </Button>\n        <Button>\n          <Link to={\"epic\"}>任务组</Link>\n        </Button>\n      </header>\n      <main>\n        <Routes>\n          <Route path={\"/kanban\"} element={<KanbanScreen />} />\n          <Route path={\"/epic\"} element={<EpicScreen />} />\n          <Route index element={<KanbanScreen />} />\n        </Routes>\n      </main>\n    </>\n  );\n};\n","import { Button, Drawer } from \"antd\";\nimport { useProjectModal } from \"./util\";\n\nexport const ProjectModal = () => {\n  const { projectModalOpen, close } = useProjectModal();\n  return (\n    <Drawer visible={projectModalOpen} onClose={close} width=\"100%\">\n      <Button onClick={close}>关闭</Button>\n    </Drawer>\n  );\n};\n","import { Button, Divider, List, Popover, Typography } from \"antd\";\nimport { useProjectModal } from \"../screens/project-list/util\";\nimport { useProjects } from \"../utils/project\";\n\nexport const ProjectPopover = () => {\n  const { open } = useProjectModal();\n  const { data: projects } = useProjects();\n  const pinnedProjects = projects?.filter((item) => item.pin);\n\n  const content = (\n    <div>\n      <Typography.Text type=\"secondary\">收藏项目</Typography.Text>\n      <List>\n        {pinnedProjects?.map((item) => (\n          <List.Item key={item.id}>\n            <List.Item.Meta title={item.name} />\n          </List.Item>\n        ))}\n      </List>\n      <Divider />\n      <Button style={{ padding: 0 }} type=\"link\" onClick={open}>\n        创建项目\n      </Button>\n    </div>\n  );\n\n  return (\n    <Popover placement=\"bottom\" content={content}>\n      项目\n    </Popover>\n  );\n};\n","import { Button } from \"antd\";\nimport { useAuth } from \"./context/auth-context\";\nimport { ProjectListScreen } from \"./screens/project-list\";\nimport { Route, Routes } from \"react-router\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { ProjectScreen } from \"./screens/project\";\nimport { resetRoute } from \"./utils\";\nimport { ProjectModal } from \"./screens/project-list/project-modal\";\nimport { ProjectPopover } from \"./components/project-popover\";\n\nexport const AuthenticatadApp = () => {\n  const { logout } = useAuth();\n  return (\n    <>\n      <Router>\n        <Button onClick={resetRoute}>首页</Button>\n        <Button onClick={logout}>登出</Button>\n        <ProjectPopover />\n        <Routes>\n          <Route path={\"projects\"} element={<ProjectListScreen />} />\n          <Route path={\"projects/:projectId/*\"} element={<ProjectScreen />} />\n          <Route index element={<ProjectListScreen />} />\n        </Routes>\n        <ProjectModal />\n      </Router>\n    </>\n  );\n};\n","/**\n * 错误边界\n */\nimport React from \"react\";\n\ntype FallbackRender = (props: { error: Error | null }) => React.ReactElement;\n\nexport class ErrorBoundary extends React.Component<\n  React.PropsWithChildren<{ fallbackRender: FallbackRender }>,\n  { error: Error | null }\n> {\n  state = { error: null };\n\n  static getDerivedStateFromError(error: Error) {\n    return { error };\n  }\n\n  render() {\n    const { error } = this.state;\n    const { fallbackRender, children } = this.props;\n    if (error) {\n      return fallbackRender({ error });\n    }\n    return children;\n  }\n}\n","import { Button, Form, Input } from \"antd\";\nimport { useAuth } from \"../context/auth-context\";\nimport { useAsync } from \"../use-async\";\nexport const LoginScreen = ({\n  onError,\n}: {\n  onError: (error: Error) => void;\n}) => {\n  const { login } = useAuth();\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true });\n\n  const handleSubmit = async (values: {\n    username: string;\n    password: string;\n  }) => {\n    try {\n      await run(login(values));\n    } catch (e) {\n      onError(e as Error);\n    }\n  };\n\n  return (\n    <Form onFinish={handleSubmit}>\n      <Form.Item\n        name=\"username\"\n        rules={[{ required: true, message: \"請輸入用戶名\" }]}\n      >\n        <Input placeholder=\"用戶名\" />\n      </Form.Item>\n      <Form.Item\n        name=\"password\"\n        rules={[{ required: true, message: \"請輸入密碼\" }]}\n      >\n        <Input placeholder=\"密碼\" />\n      </Form.Item>\n      <Form.Item>\n        <Button loading={isLoading} htmlType=\"submit\" type=\"primary\">\n          登录\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n","import { Button, Form, Input } from \"antd\";\nimport { useAuth } from \"../context/auth-context\";\nimport { useAsync } from \"../use-async\";\nexport const RegisterScreen = ({\n  onError,\n}: {\n  onError: (error: Error) => void;\n}) => {\n  const { register } = useAuth();\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true });\n\n  const handleSubmit = async ({\n    cpassword,\n    ...values\n  }: {\n    username: string;\n    password: string;\n    cpassword: string;\n  }) => {\n    if (cpassword !== values.password) {\n      onError(new Error(\"请确认两次输入的密码相同\"));\n      return;\n    }\n    try {\n      await run(register(values));\n    } catch (e) {\n      onError(e as Error);\n    }\n  };\n\n  return (\n    <Form onFinish={handleSubmit}>\n      <Form.Item\n        name=\"username\"\n        rules={[{ required: true, message: \"請輸入用戶名\" }]}\n      >\n        <Input placeholder=\"用戶名\" />\n      </Form.Item>\n      <Form.Item\n        name=\"password\"\n        rules={[{ required: true, message: \"請輸入密碼\" }]}\n      >\n        <Input placeholder=\"密碼\" />\n      </Form.Item>\n      <Form.Item\n        name=\"cpassword\"\n        rules={[{ required: true, message: \"請确认密碼\" }]}\n      >\n        <Input placeholder=\"确认密碼\" />\n      </Form.Item>\n      <Form.Item>\n        <Button loading={isLoading} htmlType=\"submit\" type=\"primary\">\n          注册\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport { Button, Card, Divider } from \"antd\";\nimport { useState } from \"react\";\nimport { ErrorBox } from \"../components/lib\";\nimport { LoginScreen } from \"./login\";\nimport { RegisterScreen } from \"./register\";\n\nexport const UnauthenticateApp = () => {\n  const [isRegister, setIsRegister] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  return (\n    <Container style={{ display: \"flex\", justifyContent: \"center\" }}>\n      <ShadowCard>\n        <ErrorBox error={error} />\n        {isRegister ? (\n          <RegisterScreen onError={setError} />\n        ) : (\n          <LoginScreen onError={setError} />\n        )}\n        <Divider />\n        <Button onClick={() => setIsRegister(!isRegister)}>\n          {isRegister ? \"已经有账号了?直接登录\" : \"没有账号?注册新账号\"}\n        </Button>\n      </ShadowCard>\n    </Container>\n  );\n};\n\nconst ShadowCard = styled(Card)`\n  width: 40rem;\n  min-height: 56rem;\n  padding: 3.2rem 4rem;\n  border-radius: 0.3rem;\n  box-sizing: border-box;\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\n  text-align: center;\n`;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n`;\n","import \"./App.css\";\nimport { AuthenticatadApp } from \"./authenticated-app\";\nimport { ErrorBoundary } from \"./components/error-boundary\";\nimport { FullPageErrorFallback } from \"./components/lib\";\nimport { useAuth } from \"./context/auth-context\";\nimport { UnauthenticateApp } from \"./unauthenticated-app\";\n\nfunction App() {\n  const { user } = useAuth();\n  return (\n    <div className=\"App\">\n      <ErrorBoundary fallbackRender={FullPageErrorFallback}>\n        {user ? <AuthenticatadApp /> : <UnauthenticateApp />}\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { ReactNode } from \"react\";\nimport { AuthProvider } from \"./auth-context\";\nimport { QueryClientProvider, QueryClient } from \"react-query\";\n\nexport const AppProviders = ({ children }: { children: ReactNode }) => {\n  return (\n    <QueryClientProvider client={new QueryClient()}>\n      <AuthProvider>{children}</AuthProvider>\n    </QueryClientProvider>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { loadServer, DevTools } from \"jira-dev-tool\";\nimport \"antd/dist/antd.less\";\nimport { AppProviders } from \"./context\";\n\nloadServer(() =>\n  ReactDOM.render(\n    <React.StrictMode>\n      <AppProviders>\n        <DevTools />\n        <App />\n      </AppProviders>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  )\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}